{"version":3,"sources":["js/gallery.js"],"names":["galleryItems","preview","original","description","galeryListRef","document","querySelector","modelWindowRef","menuBtnRef","imageRef","overlayRef","number","imagesGallery","createGalleryMarkup","imagesList","map","join","setImageAttr","src","alt","setAttribute","closeModalForm","classList","remove","window","removeEventListener","onKeyPress","getImageForView","idxImage","delta","res","length","getImageIndex","imageLink","indexOf","find","imageObj","onClickImage","event","preventDefault","target","nodeName","attributes","value","add","addEventListener","onClickButtonClose","dataset","action","onClickOverlay","key","insertAdjacentHTML"],"mappings":";AAAA,IAAMA,EAAe,CACjB,CACEC,QACE,uFACFC,SACE,uFACFC,YAAa,mBAEf,CACEF,QACE,4EACFC,SACE,4EACFC,YAAa,6BAEf,CACEF,QACE,wEACFC,SACE,wEACFC,YAAa,qBAEf,CACEF,QACE,0EACFC,SACE,0EACFC,YAAa,iBAEf,CACEF,QACE,4EACFC,SACE,4EACFC,YAAa,oBAEf,CACEF,QACE,4EACFC,SACE,4EACFC,YAAa,yBAEf,CACEF,QACE,2EACFC,SACE,2EACFC,YAAa,yBAEf,CACEF,QACE,4EACFC,SACE,4EACFC,YAAa,oBAEf,CACEF,QACE,6EACFC,SACE,6EACFC,YAAa,yBAIXC,EAAgBC,SAASC,cAAc,eACvCC,EAAiBF,SAASC,cAAc,gBACxCE,EAAaH,SAASC,cAAc,qBACpCG,EAAWJ,SAASC,cAAc,oBAClCI,EAAaL,SAASC,cAAc,sBACtCK,EAAS,EAEPC,EAAgBC,EAAoBb,GAO1C,SAASa,EAAoBC,GAC3B,OAAOA,EACJC,IAAI,SAAwC,GAAA,IAArCd,EAAAA,EAAAA,QAASC,EAAAA,EAAAA,SAAUC,EAAAA,EAAAA,YACzB,MAEiCD,8EAAAA,OAAAA,EACID,qDAAAA,OAAAA,EAAyBC,mBAAAA,OAAAA,EAAkBC,WAAAA,OAAAA,EAAW,oCAI5Fa,KAAK,IAGV,SAASC,EAAaC,EAAIC,GACxBV,EAASW,aAAa,MAAMF,GAC5BT,EAASW,aAAa,MAAMD,GAG9B,SAASE,IACPd,EAAee,UAAUC,OAAO,WAChCN,EAAa,GAAI,IACjBO,OAAOC,oBAAoB,QAASC,GAGtC,SAASC,EAAgBC,EAAUC,GACjC,IAAIC,EAAMF,EAAWC,EASrB,OARIA,EAAQ,GAAKD,GAAY5B,EAAa+B,OAAS,EACjDD,EAAM,EAEFD,EAAQ,GAAiB,GAAZD,IACfE,EAAM9B,EAAa+B,OAAS,GAGhCd,EAAajB,EAAa8B,GAAK5B,SAAUF,EAAa8B,GAAK3B,aACpD2B,EAGT,SAASE,EAAcC,GACrB,OAAOjC,EAAakC,QAClBlC,EAAamC,KAAK,SAACC,GAAQ,OAAKA,EAASnC,UAAYgC,KAIzD,SAASI,EAAaC,GACpBA,EAAMC,iBACwB,QAA1BD,EAAME,OAAOC,WACfxB,EACEqB,EAAME,OAAOE,WAAW,eAAeC,MACvCL,EAAME,OAAOrB,KAGfZ,EAAee,UAAUsB,IAAI,WAC7BjC,EAASqB,EAAcM,EAAME,OAAOtB,KACpCM,OAAOqB,iBAAiB,QAASnB,IAIrC,SAASoB,EAAmBR,GACU,mBAAhCA,EAAME,OAAOO,QAAQC,QACvB3B,IAIJ,SAAS4B,IACP5B,IAGF,SAASK,EAAWY,GAClB,OAAQA,EAAMY,KACZ,IAAK,MACL,IAAK,SACH7B,IACA,MACF,IAAK,OACL,IAAK,YACHV,EAASgB,EAAgBhB,GAAS,GAClC,MACF,IAAK,QACL,IAAK,aACHA,EAASgB,EAAgBhB,EAAQ,IArFvCP,EAAc+C,mBAAmB,YAAYvC,GAE7CR,EAAcyC,iBAAiB,QAAQR,GACvC3B,EAAWmC,iBAAiB,QAASI,GACrCzC,EAAWqC,iBAAiB,QAAQC","file":"gallery.f8dac004.js","sourceRoot":"../src","sourcesContent":["const galleryItems = [\n    {\n      preview:\n        'https://cdn.pixabay.com/photo/2019/05/14/16/43/himilayan-blue-poppy-4202825__340.jpg',\n      original:\n        'https://cdn.pixabay.com/photo/2019/05/14/16/43/himilayan-blue-poppy-4202825_1280.jpg',\n      description: 'Hokkaido Flower',\n    },\n    {\n      preview:\n        'https://cdn.pixabay.com/photo/2019/05/14/22/05/container-4203677__340.jpg',\n      original:\n        'https://cdn.pixabay.com/photo/2019/05/14/22/05/container-4203677_1280.jpg',\n      description: 'Container Haulage Freight',\n    },\n    {\n      preview:\n        'https://cdn.pixabay.com/photo/2019/05/16/09/47/beach-4206785__340.jpg',\n      original:\n        'https://cdn.pixabay.com/photo/2019/05/16/09/47/beach-4206785_1280.jpg',\n      description: 'Aerial Beach View',\n    },\n    {\n      preview:\n        'https://cdn.pixabay.com/photo/2016/11/18/16/19/flowers-1835619__340.jpg',\n      original:\n        'https://cdn.pixabay.com/photo/2016/11/18/16/19/flowers-1835619_1280.jpg',\n      description: 'Flower Blooms',\n    },\n    {\n      preview:\n        'https://cdn.pixabay.com/photo/2018/09/13/10/36/mountains-3674334__340.jpg',\n      original:\n        'https://cdn.pixabay.com/photo/2018/09/13/10/36/mountains-3674334_1280.jpg',\n      description: 'Alpine Mountains',\n    },\n    {\n      preview:\n        'https://cdn.pixabay.com/photo/2019/05/16/23/04/landscape-4208571__340.jpg',\n      original:\n        'https://cdn.pixabay.com/photo/2019/05/16/23/04/landscape-4208571_1280.jpg',\n      description: 'Mountain Lake Sailing',\n    },\n    {\n      preview:\n        'https://cdn.pixabay.com/photo/2019/05/17/09/27/the-alps-4209272__340.jpg',\n      original:\n        'https://cdn.pixabay.com/photo/2019/05/17/09/27/the-alps-4209272_1280.jpg',\n      description: 'Alpine Spring Meadows',\n    },\n    {\n      preview:\n        'https://cdn.pixabay.com/photo/2019/05/16/21/10/landscape-4208255__340.jpg',\n      original:\n        'https://cdn.pixabay.com/photo/2019/05/16/21/10/landscape-4208255_1280.jpg',\n      description: 'Nature Landscape',\n    },\n    {\n      preview:\n        'https://cdn.pixabay.com/photo/2019/05/17/04/35/lighthouse-4208843__340.jpg',\n      original:\n        'https://cdn.pixabay.com/photo/2019/05/17/04/35/lighthouse-4208843_1280.jpg',\n      description: 'Lighthouse Coast Sea',\n    },\n  ];\n\n  const galeryListRef = document.querySelector(\".js-gallery\");\n  const modelWindowRef = document.querySelector(\".js-lightbox\");\n  const menuBtnRef = document.querySelector(\".lightbox__button\");\n  const imageRef = document.querySelector(\".lightbox__image\");\n  const overlayRef = document.querySelector(\".lightbox__overlay\");\n  let number = 0;\n\n  const imagesGallery = createGalleryMarkup(galleryItems);\n  galeryListRef.insertAdjacentHTML('beforeend',imagesGallery);\n\n  galeryListRef.addEventListener('click',onClickImage);\n  overlayRef.addEventListener('click', onClickOverlay);\n  menuBtnRef.addEventListener('click',onClickButtonClose);\n\n  function createGalleryMarkup(imagesList) {\n    return imagesList\n      .map(({ preview, original, description }) => {\n        return `\n      <li class=\"gallery__item\">\n        <a class=\"gallery__link\" href=\"${original}\" > \n          <img class=\"gallery__image\" src=\"${preview}\" data-source=\"${original}\" alt=\"${description}\"/>\n        </a>\n      </li>`;\n      })\n      .join(\"\");\n  }\n  \n  function setImageAttr(src,alt){\n    imageRef.setAttribute('src',src);\n    imageRef.setAttribute('alt',alt);\n  }\n\n  function closeModalForm() {\n    modelWindowRef.classList.remove(\"is-open\");\n    setImageAttr(\"\", \"\");\n    window.removeEventListener(\"keyup\", onKeyPress);\n  }\n\n  function getImageForView(idxImage, delta) {\n    let res = idxImage + delta;\n    if (delta > 0 && idxImage == galleryItems.length - 1) {\n      res = 0;\n    } else {\n      if (delta < 0 && idxImage == 0) {\n        res = galleryItems.length - 1;\n      }\n    }\n    setImageAttr(galleryItems[res].original, galleryItems[res].description);\n    return res;\n  }\n\n  function getImageIndex(imageLink) {\n    return galleryItems.indexOf(\n      galleryItems.find((imageObj) => imageObj.preview === imageLink)\n    );\n  }\n\n  function onClickImage(event) {\n    event.preventDefault();\n    if (event.target.nodeName === \"IMG\") {\n      setImageAttr(\n        event.target.attributes[\"data-source\"].value,\n        event.target.alt\n      );\n  \n      modelWindowRef.classList.add(\"is-open\");\n      number = getImageIndex(event.target.src);\n      window.addEventListener(\"keyup\", onKeyPress);\n    }\n  }\n\n  function onClickButtonClose(event) {\n    if (event.target.dataset.action === \"close-lightbox\") {\n      closeModalForm();\n    }\n  }\n\n  function onClickOverlay() {\n    closeModalForm();\n  }\n\n  function onKeyPress(event) {\n    switch (event.key) {\n      case \"Esc\":\n      case \"Escape\":\n        closeModalForm();\n        break;\n      case \"Left\":\n      case \"ArrowLeft\":\n        number = getImageForView(number, -1);\n        break;\n      case \"Right\":\n      case \"ArrowRight\":\n        number = getImageForView(number, 1);\n        break;\n    }\n  }"]}