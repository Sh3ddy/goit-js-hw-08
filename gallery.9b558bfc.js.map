{"version":3,"sources":["js/gallery.js"],"names":["galleryItems","preview","original","description","galeryListRef","document","querySelector","modelWindowRef","menuBtnRef","imageRef","overlayRef","number","imagesGallery","createGalleryMarkup","insertAdjacentHTML","addEventListener","onClickImage","onClickOverlay","onClickButtonClose","imagesList","map","join","setImageAttr","src","alt","setAttribute","closeModalForm","classList","remove","window","removeEventListener","onKeyPress","getImageForView","idxImage","delta","res","length","getImageIndex","imageLink","indexOf","find","imageObj","event","preventDefault","target","nodeName","attributes","value","add","dataset","action","key"],"mappings":"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","file":"gallery.9b558bfc.js","sourceRoot":"../src","sourcesContent":["const galleryItems = [\n    {\n      preview:\n        'https://cdn.pixabay.com/photo/2019/05/14/16/43/himilayan-blue-poppy-4202825__340.jpg',\n      original:\n        'https://cdn.pixabay.com/photo/2019/05/14/16/43/himilayan-blue-poppy-4202825_1280.jpg',\n      description: 'Hokkaido Flower',\n    },\n    {\n      preview:\n        'https://cdn.pixabay.com/photo/2019/05/14/22/05/container-4203677__340.jpg',\n      original:\n        'https://cdn.pixabay.com/photo/2019/05/14/22/05/container-4203677_1280.jpg',\n      description: 'Container Haulage Freight',\n    },\n    {\n      preview:\n        'https://cdn.pixabay.com/photo/2019/05/16/09/47/beach-4206785__340.jpg',\n      original:\n        'https://cdn.pixabay.com/photo/2019/05/16/09/47/beach-4206785_1280.jpg',\n      description: 'Aerial Beach View',\n    },\n    {\n      preview:\n        'https://cdn.pixabay.com/photo/2016/11/18/16/19/flowers-1835619__340.jpg',\n      original:\n        'https://cdn.pixabay.com/photo/2016/11/18/16/19/flowers-1835619_1280.jpg',\n      description: 'Flower Blooms',\n    },\n    {\n      preview:\n        'https://cdn.pixabay.com/photo/2018/09/13/10/36/mountains-3674334__340.jpg',\n      original:\n        'https://cdn.pixabay.com/photo/2018/09/13/10/36/mountains-3674334_1280.jpg',\n      description: 'Alpine Mountains',\n    },\n    {\n      preview:\n        'https://cdn.pixabay.com/photo/2019/05/16/23/04/landscape-4208571__340.jpg',\n      original:\n        'https://cdn.pixabay.com/photo/2019/05/16/23/04/landscape-4208571_1280.jpg',\n      description: 'Mountain Lake Sailing',\n    },\n    {\n      preview:\n        'https://cdn.pixabay.com/photo/2019/05/17/09/27/the-alps-4209272__340.jpg',\n      original:\n        'https://cdn.pixabay.com/photo/2019/05/17/09/27/the-alps-4209272_1280.jpg',\n      description: 'Alpine Spring Meadows',\n    },\n    {\n      preview:\n        'https://cdn.pixabay.com/photo/2019/05/16/21/10/landscape-4208255__340.jpg',\n      original:\n        'https://cdn.pixabay.com/photo/2019/05/16/21/10/landscape-4208255_1280.jpg',\n      description: 'Nature Landscape',\n    },\n    {\n      preview:\n        'https://cdn.pixabay.com/photo/2019/05/17/04/35/lighthouse-4208843__340.jpg',\n      original:\n        'https://cdn.pixabay.com/photo/2019/05/17/04/35/lighthouse-4208843_1280.jpg',\n      description: 'Lighthouse Coast Sea',\n    },\n  ];\n\n  const galeryListRef = document.querySelector(\".js-gallery\");\n  const modelWindowRef = document.querySelector(\".js-lightbox\");\n  const menuBtnRef = document.querySelector(\".lightbox__button\");\n  const imageRef = document.querySelector(\".lightbox__image\");\n  const overlayRef = document.querySelector(\".lightbox__overlay\");\n  let number = 0;\n\n  const imagesGallery = createGalleryMarkup(galleryItems);\n  galeryListRef.insertAdjacentHTML('beforeend',imagesGallery);\n\n  galeryListRef.addEventListener('click',onClickImage);\n  overlayRef.addEventListener('click', onClickOverlay);\n  menuBtnRef.addEventListener('click',onClickButtonClose);\n\n  function createGalleryMarkup(imagesList) {\n    return imagesList\n      .map(({ preview, original, description }) => {\n        return `\n      <li class=\"gallery__item\">\n        <a class=\"gallery__link\" href=\"${original}\" > \n          <img class=\"gallery__image\" src=\"${preview}\" data-source=\"${original}\" alt=\"${description}\"/>\n        </a>\n      </li>`;\n      })\n      .join(\"\");\n  }\n  \n  function setImageAttr(src,alt){\n    imageRef.setAttribute('src',src);\n    imageRef.setAttribute('alt',alt);\n  }\n\n  function closeModalForm() {\n    modelWindowRef.classList.remove(\"is-open\");\n    setImageAttr(\"\", \"\");\n    window.removeEventListener(\"keyup\", onKeyPress);\n  }\n\n  function getImageForView(idxImage, delta) {\n    let res = idxImage + delta;\n    if (delta > 0 && idxImage == galleryItems.length - 1) {\n      res = 0;\n    } else {\n      if (delta < 0 && idxImage == 0) {\n        res = galleryItems.length - 1;\n      }\n    }\n    setImageAttr(galleryItems[res].original, galleryItems[res].description);\n    return res;\n  }\n\n  function getImageIndex(imageLink) {\n    return galleryItems.indexOf(\n      galleryItems.find((imageObj) => imageObj.preview === imageLink)\n    );\n  }\n\n  function onClickImage(event) {\n    event.preventDefault();\n    if (event.target.nodeName === \"IMG\") {\n      setImageAttr(\n        event.target.attributes[\"data-source\"].value,\n        event.target.alt\n      );\n  \n      modelWindowRef.classList.add(\"is-open\");\n      number = getImageIndex(event.target.src);\n      window.addEventListener(\"keyup\", onKeyPress);\n    }\n  }\n\n  function onClickButtonClose(event) {\n    if (event.target.dataset.action === \"close-lightbox\") {\n      closeModalForm();\n    }\n  }\n\n  function onClickOverlay() {\n    closeModalForm();\n  }\n\n  function onKeyPress(event) {\n    switch (event.key) {\n      case \"Esc\":\n      case \"Escape\":\n        closeModalForm();\n        break;\n      case \"Left\":\n      case \"ArrowLeft\":\n        number = getImageForView(number, -1);\n        break;\n      case \"Right\":\n      case \"ArrowRight\":\n        number = getImageForView(number, 1);\n        break;\n    }\n  }"]}